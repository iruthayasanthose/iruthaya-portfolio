jQuery(document).ready((function(t){var n=t(".preserve3d").length>0,i=t(".csstransitions").length>0,e=t(".cd-top");function o(t){this.element=t,this.navigation=this.element.children(".cd-3d-portfolio-navigation"),this.rowsWrapper=this.element.children(".projects"),this.rows=this.rowsWrapper.children(".row"),this.visibleFace="front",this.visibleRowIndex=0,this.rotationValue=0,this.animating=!1,this.scrolling=!1,this.bindEvents()}if(o.prototype.bindEvents=function(){var n=this;this.navigation.on("click","a:not(.selected)",(function(i){if(i.preventDefault(),!n.animating){n.animating=!0;var e=t(this).parent("li").index();t(this).addClass("selected").parent("li").siblings("li").find(".selected").removeClass("selected"),n.showNewContent(e)}})),this.rows.on("click","li.selected",(function(){n.animating||t(this).hasClass("open")||(n.animating=!0,n.rowsWrapper.addClass("project-is-open project-has-transition"),t(this).addClass("open").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){n.animating=!1,t(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")})),i||(n.animating=!1))})),this.element.on("click",".close-project",(function(e){e.preventDefault(),n.animating||(n.animating=!0,n.rowsWrapper.removeClass("project-is-open"),n.rows.find("li.open").find(".project-title").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){t(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),n.resetProjects()})),i||n.resetProjects())})),this.rowsWrapper.find(".project-wrapper").on("scroll",(function(){var i=t(this).scrollTop();n.scrolling||(n.scrolling=!0,window.requestAnimationFrame?window.requestAnimationFrame((function(){n.checkScroll(i)})):setTimeout((function(){n.checkScroll(i)}),250))}))},o.prototype.resetProjects=function(){this.rows.find("li.open").removeClass("open"),this.rowsWrapper.removeClass("project-has-transition"),this.animating=!1},o.prototype.checkScroll=function(t){t>300?e.addClass("is-visible"):e.removeClass("is-visible cd-fade-out"),this.scrolling=!1},o.prototype.showNewContent=function(i){var e=this,o=i>e.visibleRowIndex?"rightToLeft":"leftToRight",s=this.getRotationPrameters(o),r=s[0],a=s[1],c=t(window).width()/2;this.rows.each((function(){t(this).children("li").addClass("hidden").removeClass("selected").eq(i).removeClass("hidden left-face right-face back-face front-face").addClass(r+"-face selected").end().eq(e.visibleRowIndex).removeClass("hidden selected")})),n?this.setTransform(a,c):e.animating=!1,this.visibleFace=r,this.visibleRowIndex=i,this.rotationValue=a},o.prototype.getRotationPrameters=function(t){return["front"==this.visibleFace?"rightToLeft"==t?"right":"left":"right"==this.visibleFace?"rightToLeft"==t?"back":"front":"left"==this.visibleFace?"rightToLeft"==t?"front":"back":"rightToLeft"==t?"left":"right","rightToLeft"==t?this.rotationValue-90:this.rotationValue+90]},o.prototype.setTransform=function(n,i){var e=this;this.rows.each((function(o){t(this).css({"-moz-transform":"translateZ(-"+i+"px) rotateY("+n+"deg)","-webkit-transform":"translateZ(-"+i+"px) rotateY("+n+"deg)","-ms-transform":"translateZ("-+i+"px) rotateY("+n+"deg)","-o-transform":"translateZ(-"+i+"px) rotateY("+n+"deg)",transform:"translateZ(-"+i+"px) rotateY("+n+"deg)"}),2==o&&t(this).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){t(this).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),e.animating=!1}))}))},o.prototype.scrollProjectTop=function(){this.rows.children("li.selected.open").find(".project-wrapper").animate({scrollTop:0},300)},t(".cd-3d-portfolio").length>0){var s=[];t(".cd-3d-portfolio").each((function(){s.push(new o(t(this)))}))}var r=!1;function a(){s.forEach((function(n){n.setTransform(n.rotationValue,t(window).width()/2)})),r=!1}t(window).on("resize",(function(){r||(r=!0,window.requestAnimationFrame?window.requestAnimationFrame(a):setTimeout(a,250))})),e.on("click",(function(t){t.preventDefault(),s.forEach((function(t){t.scrollProjectTop()}))}))}));
//# sourceMappingURL=index.ca5f89af.js.map
